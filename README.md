# Log Monitoring Tool

This console tool report statistics on an actively written http log file (format: https://en.wikipedia.org/wiki/Common_Log_Format).

## Getting Started

Add the project files to your $GOPATH/src/ directory, then use the makefile to build and test the tool.
The console tool binary is compiled at ```bin/logmonitor```, a log generator with predictive patterns, used for tests, is at ```bin/logmonitor```, use the flag ```-h``` in both of the tools to show parameters and defaults.

## Prerequisites & Build

The log monitoring tool requires go >= 1.14 and make. To build the tool run ```make all```.

## Running the tests

```make test``` runs the unit tests and the alerting logic tests.

The alerting logic test (```e2e/test.sh```) tests the correct occurencies of alert messages on a prepared log pattern generated by the loggenerator tool, you can tweak the default parameters of the end to end test defining the environment variable for the parameter you want to override.

## Architecture

The packages ```logmonitor``` is the one with the main function that is responsible for reading the log files and show the statistics and alerts. A textual log line is converted to a structure (defined in the ```commonlog``` package) representing the fileds of the common log format so that further statistics can be extracted from it. More statistics can be added to the tool, every statistic implements the interface ```Stat``` so that it can be updated/queried from the tool in a standard way. The same logic is applyed for the alerts, with the ```Alert``` interface, even if currently only one kind of alert is defined.


## Further Improvements

More statistics and alerts could be added, with more sophistication. Different kinds of log formats could be supported. Currently the tool does not support truncation for the log file, i.e. it does not recognize it.
